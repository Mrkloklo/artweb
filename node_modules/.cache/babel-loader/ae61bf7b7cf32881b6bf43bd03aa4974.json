{"remainingRequest":"/Users/gujiahao/Documents/work/github/artweb/node_modules/babel-loader/lib/index.js!/Users/gujiahao/Documents/work/github/artweb/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/gujiahao/Documents/work/github/artweb/public/ejs/v2/epoint.moapi.v2.dd.js","dependencies":[{"path":"/Users/gujiahao/Documents/work/github/artweb/public/ejs/v2/epoint.moapi.v2.dd.js","mtime":1588230106434},{"path":"/Users/gujiahao/Documents/work/github/artweb/node_modules/cache-loader/dist/cjs.js","mtime":1579587180818},{"path":"/Users/gujiahao/Documents/work/github/artweb/node_modules/babel-loader/lib/index.js","mtime":1585810045725},{"path":"/Users/gujiahao/Documents/work/github/artweb/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1579587173378}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _typeof from \"/Users/gujiahao/Documents/work/github/artweb/node_modules/@babel/runtime-corejs2/helpers/esm/typeof\";\n\n/**\n * 作者: guotq\n * 创建时间: 2016/12/06\n * 版本: [1.0, 2017/05/25 ]\n * 版权: 江苏国泰新点软件有限公司\n * 描述: ejs 2.1系列API在dd环境下的部分实现\n * 目前只实现了部分api\n * 请先引入ejsv2核心文件\n * 实现的模块有:\n * nativeUI模块\n * navigator部分功能\n * ddComponent 钉钉平台下独特的一些api\n */\n\n/**\n * 拓展ejs在钉钉下的api\n * 所有参数和ejs保持一致就行了\n */\nejs.extendFucObj('nativeUI', {\n  'toast': function toast(options) {\n    if (!ejs.os.dd) {\n      // 只有dd中才能使用\n      return;\n    }\n\n    var msg = '';\n    options = options || {};\n\n    if (typeof options === 'string') {\n      msg = options;\n    } else {\n      msg = options.message;\n    }\n\n    dd.device.notification.toast({\n      icon: '',\n      //icon样式，有success和error，默认为空 0.0.2\n      text: msg || '',\n      //提示信息\n      duration: 2,\n      //显示持续时间，单位秒，默认按系统规范[android只有两种(<=2s >2s)]\n      delay: 0,\n      //延迟显示，单位秒，默认0\n      onSuccess: function onSuccess(result) {\n        /*{}*/\n      },\n      onFail: function onFail(err) {}\n    });\n  },\n  //callback目前只有钉钉中有用\n  'alert': function alert(options, callback) {\n    if (!ejs.os.dd) {\n      // 只有dd中才能使用\n      return;\n    }\n\n    var title = '',\n        msg = '',\n        btn = '';\n    options = options || {};\n\n    if (typeof options === 'string') {\n      msg = options;\n      title = arguments[1] || '';\n      btn = arguments[2] || '';\n      callback = arguments[3] || null;\n    } else {\n      msg = options.message;\n      title = options.title;\n      btn = options.btn;\n    }\n\n    msg = msg || '';\n    title = title || \"提示\";\n    btn = btn || '确定';\n    dd.device.notification.alert({\n      message: msg,\n      title: title,\n      //可传空\n      buttonName: btn,\n      onSuccess: function onSuccess() {\n        //onSuccess将在点击button之后回调\n\n        /*回调*/\n        callback && callback();\n      },\n      onFail: function onFail(err) {\n        error && error();\n      }\n    });\n  },\n  'confirm': function confirm(options, callback) {\n    if (!ejs.os.dd) {\n      // 只有dd中才能使用\n      return;\n    }\n\n    options = options || {};\n\n    if (typeof options === 'string') {\n      options = {\n        'message': options\n      };\n\n      if (typeof arguments[1] === 'string') {\n        options.title = arguments[1];\n\n        if (_typeof(arguments[2]) === 'object') {\n          btnArray = arguments[2];\n          callback = arguments[3];\n        } else {\n          callback = arguments[2];\n        }\n      }\n    }\n\n    var msg = options.message || '';\n    var title = options.title || \"提示\";\n    var btnArray = [];\n    var btn1 = options.btn1 || '取消';\n    var btn2 = options.btn2 || (options.btn2 !== null ? '确定' : '');\n    btn1 && btnArray.push(btn1);\n    btn2 && btnArray.push(btn2);\n    dd.device.notification.confirm({\n      message: msg,\n      title: title,\n      buttonLabels: btnArray,\n      onSuccess: function onSuccess(result) {\n        //onSuccess将在点击button之后回调\n\n        /*\n        {\n            buttonIndex: 0 //被点击按钮的索引值，Number类型，从0开始\n        }\n        */\n        var index = -1 * (result.buttonIndex + 1);\n        var res = {\n          'code': 1,\n          'msg': '',\n          'result': {\n            \"which\": index\n          },\n          'detail': result\n        };\n        callback && callback(res.result, res.msg, res);\n      },\n      onFail: function onFail(err) {}\n    });\n  },\n  //ejs下暂时没有title与options属性这个属性\n  //padlock  点击自动关闭--目前只有这个兼容h5版本\n  'showWaiting': function showWaiting(title, options) {\n    if (!ejs.os.dd) {\n      // 只有dd中才能使用\n      return;\n    }\n\n    title = title || '';\n    options = options || {};\n    dd.device.notification.showPreloader({\n      text: title || \"等待中...\",\n      //loading显示的字符，空表示不显示文字\n      showIcon: true,\n      //是否显示icon，默认true\n      onSuccess: function onSuccess() {\n        /*{}*/\n      },\n      onFail: function onFail(err) {}\n    });\n  },\n  'closeWaiting': function closeWaiting() {\n    if (!ejs.os.dd) {\n      // 只有dd中才能使用\n      return;\n    }\n\n    dd.device.notification.hidePreloader({\n      onSuccess: function onSuccess(result) {\n        /*{}*/\n      },\n      onFail: function onFail(err) {}\n    });\n  },\n  'actionSheet': function actionSheet(options, callback) {\n    if (!ejs.os.dd) {\n      // 只有dd中才能使用\n      return;\n    }\n\n    options = options || {};\n    options.items = options.items || [];\n    var title = options.title || '';\n    dd.device.notification.actionSheet({\n      title: title,\n      //标题\n      cancelButton: '取消',\n      //取消按钮文本\n      otherButtons: options.items,\n      onSuccess: function onSuccess(result) {\n        //onSuccess将在点击button之后回调\n\n        /*{\n            buttonIndex: 0 //被点击按钮的索引值，Number，从0开始, 取消按钮为-1\n        }*/\n        var index = result.buttonIndex;\n        var content = options.items[index];\n        var res = {\n          'code': 1,\n          'msg': '',\n          'result': {\n            \"which\": index,\n            \"content\": content\n          }\n        };\n        callback && callback(res.result, res.msg, res);\n      },\n      onFail: function onFail(err) {\n        error && error();\n      }\n    });\n  }\n});\n/**\n * 拓展  navigator 模块\n */\n\nejs.extendFucObj('navigator', {\n  'setTitle': function setTitle(title) {\n    if (!ejs.os.dd) {\n      // 只有dd中才能使用\n      return;\n    }\n\n    title = title || '';\n    dd.biz.navigation.setTitle({\n      title: title,\n      //控制标题文本，空字符串表示显示默认文本\n      onSuccess: function onSuccess(result) {},\n      onFail: function onFail(err) {}\n    });\n  },\n  'setRightTextBtn': function setRightTextBtn(title, callback) {\n    if (!ejs.os.dd) {\n      // 只有dd中才能使用\n      return;\n    }\n\n    title = title || '';\n    dd.biz.navigation.setRight({\n      show: title ? true : false,\n      //控制按钮显示， true 显示， false 隐藏， 默认true\n      control: callback ? true : false,\n      //是否控制点击事件，true 控制，false 不控制， 默认false\n      text: title || '',\n      //控制显示文本，空字符串表示显示默认文本\n      onSuccess: function onSuccess(result) {\n        //如果control为true，则onSuccess将在发生按钮点击事件被回调\n\n        /*\n        {}\n        */\n        callback && callback(result);\n      },\n      onFail: function onFail(err) {//设置按钮失败，可以提示\n      }\n    });\n  },\n  // ejs中是用popwindow来实现\n  'setRightMenu': function setRightMenu(backgroundColor, items, callback) {\n    if (!ejs.os.dd) {\n      // 只有dd中才能使用\n      return;\n    }\n\n    dd.biz.navigation.setMenu({\n      backgroundColor: backgroundColor,\n      items: items,\n      onSuccess: function onSuccess(data) {\n        callback && callback(data);\n      },\n      onFail: function onFail(err) {}\n    });\n  }\n});\n/**\n * 拓展dd特有的api\n * 这种API只适合与钉钉平台 \n */\n\nejs.extendFucObj('ddComponent', {\n  /**\n   * @description 选择通讯录,将一些逻辑都封装起来,简化使用\n   * @param {JSON} options 选项\n   * @param {Function} callback 回调函数\n   */\n  'chooseContactPerson': function chooseContactPerson(options, callback) {\n    if (!ejs.os.dd) {\n      // 只有dd中才能使用\n      return;\n    }\n\n    ejs.nativeUI.actionSheet({\n      'title': '打开类别',\n      'items': ['整个公司选择', '本部门选择']\n    }, function (result) {\n      var index = result.which;\n\n      if (index === -1) {\n        return;\n      } //默认为整个公司选择\n\n\n      var type = 0;\n\n      if (index === 1) {\n        //部门选择\n        type = -1;\n      }\n\n      dd.biz.contact.choose({\n        //默认要整个公司进行选择\n        startWithDepartmentId: type,\n        //-1表示打开的通讯录从自己所在部门开始展示, 0表示从企业最上层开始，(其他数字表示从该部门开始:暂时不支持)\n        multiple: true,\n        //是否多选： true多选 false单选； 默认true\n        users: options.userGuidList,\n        //默认选中的用户列表，userid；成功回调中应包含该信息\n        corpId: options.corpId,\n        //企业id\n        max: options.currMaxChooseCount,\n        //人数限制，当multiple为true才生效，可选范围1-1500\n        onSuccess: function onSuccess(data) {\n          //onSuccess将在选人结束，点击确定按钮的时候被回调\n\n          /* data结构\n            [{\n              \"name\": \"张三\", //姓名\n              \"avatar\": \"http://g.alicdn.com/avatar/zhangsan.png\" //头像图片url，可能为空\n              \"emplId\": '0573', //userid\n             },\n             ...\n            ]\n          */\n          callback && callback(data);\n        },\n        onFail: function onFail(err) {}\n      });\n    });\n  },\n\n  /**\n   * @description 将文件转存到钉盘\n   * @param {JSON} options 选项\n   * @param {Function} callback 回调函数\n   */\n  'saveFileToDP': function saveFileToDP(options, callback) {\n    if (!ejs.os.dd) {\n      // 只有dd中才能使用\n      return;\n    }\n\n    options = options || {};\n    dd.biz.cspace.saveFile({\n      corpId: options.corpId,\n      url: options.url,\n      name: options.name || '匿名文件',\n      onSuccess: function onSuccess(data) {\n        /* data结构\n        {\"data\":\n           [\n           {\n           \"corpId\": \"\", //公司id\n           \"spaceId\": \"\" //空间id\n           \"fileId\": \"\", //文件id\n           \"fileName\": \"\", //文件名\n           \"fileSize\": 111111, //文件大小\n           \"fileType\": \"\", //文件类型\n           }\n           ]\n        }\n        */\n        ejs.nativeUI.toast('转到钉盘成功');\n        callback && callback(data);\n      },\n      onFail: function onFail(err) {\n        ejs.nativeUI.toast('转到钉盘失败...');\n      }\n    });\n  },\n\n  /**\n   * @description 钉住,发钉,不是钉盘\n   * @param {JSON} options\n   * @param {Function} callback\n   */\n  'postDing': function postDing(options, callback) {\n    if (!ejs.os.dd) {\n      // 只有dd中才能使用\n      return;\n    }\n\n    options = options || {};\n    dd.biz.ding.post({\n      //用户列表，默认为用户自己\n      users: options.users,\n      corpId: options.corpId,\n      //企业id\n      type: options.type,\n      //钉类型 1：image  2：link\n      alertType: options.alertType || 2,\n      alertDate: options.alertDate,\n      attachment: options.attachment,\n      text: options.text,\n      //消息\n      onSuccess: function onSuccess() {\n        callback && callback();\n      },\n      onFail: function onFail() {}\n    });\n  },\n\n  /**\n   * @description 上传拍照图片，可以得到照片\n   * @param {JSON} options\n   * @param {Function} callback\n   */\n  'uploadImageFromCamera': function uploadImageFromCamera(options, callback) {\n    if (!ejs.os.dd) {\n      // 只有dd中才能使用\n      return;\n    }\n\n    options = options || {};\n    dd.biz.util.uploadImageFromCamera({\n      compression: options.compression,\n      //(是否压缩，默认为true)\n      onSuccess: function onSuccess(result) {\n        callback && callback(result); //onSuccess将在图片上传成功之后调用\n\n        /*\n        [\n          'http://gtms03.alicdn.com/tps/i3/TB1VF6uGFXXXXalaXXXmh5R_VXX-237-236.png'\n        ]\n        */\n      },\n      onFail: function onFail() {}\n    });\n  },\n\n  /**\n   * @description 上传相册，可以得到照片\n   * @param {JSON} options\n   * @param {Function} callback\n   */\n  'uploadImage': function uploadImage(options, callback) {\n    if (!ejs.os.dd) {\n      // 只有dd中才能使用\n      return;\n    }\n\n    options = options || {};\n    dd.biz.util.uploadImage({\n      multiple: options.multiple,\n      //是否多选，默认false\n      max: options.max,\n      //最多可选个数\n      onSuccess: function onSuccess(result) {\n        callback && callback(result); //onSuccess将在图片上传成功之后调用\n\n        /*\n        [\n          'http://gtms03.alicdn.com/tps/i3/TB1VF6uGFXXXXalaXXXmh5R_VXX-237-236.png'\n        ]\n        */\n      },\n      onFail: function onFail() {}\n    });\n  },\n\n  /**\n   * @description 处理附件，是决定用钉盘还是下载\n   * @param {JSON} options 参数\n   */\n  dealWithAttachFile: function dealWithAttachFile(options) {\n    if (!ejs.os.dd) {\n      // 只有dd中才能使用\n      return;\n    }\n\n    options = options || {};\n    var url = options.url || '';\n    var name = options.name || '';\n    var corpId = options.corpId || '';\n    var itemsArray = ['转到钉盘', '直接下载'];\n\n    if (CommonTools.os.ios) {\n      //iOS下只支持rar,zip的下载\n      if (url.toLowerCase().indexOf('.zip') === -1 && url.toLowerCase().indexOf('.rar') === -1) {\n        itemsArray.splice(1, 1);\n      }\n    }\n\n    ejs.nativeUI.actionSheet({\n      'title': '选择',\n      'items': itemsArray\n    }, function (result) {\n      var index = result.which;\n\n      if (index === 0) {\n        //url = 'http://218.4.136.114:7009/EpointMobilePlatform6/test.xlsx';\n        ejs.ddComponent.saveFileToDP({\n          corpId: corpId,\n          url: url,\n          name: name\n        });\n      } else if (index === 1) {\n        window.location.href = url;\n      }\n    });\n  }\n});\n/**\n * 单独覆盖一些已有的esj api 和拓展模式有区别\n * 比如openPage需要重新改写逻辑\n * 目前只支持单个覆盖\n * 目前不会自动暴露出去，只会覆盖已有\n */\n\n(function () {\n  var oldOpenPage = ejs.page.openPage; // 覆盖openPage,默认关闭钉钉中的分享\n\n  ejs.extendFuc('page', 'openPage', function (url, title, jsonObj, options, callback, error) {\n    jsonObj = jsonObj || {};\n    options = options || {};\n    url = ejs.app.appendParams(url, jsonObj);\n\n    if (ejs.os.dd) {\n      if (url.indexOf('?') === -1) {\n        url += '?';\n      } else {\n        url += '&';\n      }\n\n      url += 'dd_share=false';\n      console.log(\"url:\" + url);\n      document.location.href = url;\n    } else {\n      oldOpenPage(url, title, jsonObj, options, callback, error);\n    }\n  }, true);\n})();",{"version":3,"sources":["/Users/gujiahao/Documents/work/github/artweb/public/ejs/v2/epoint.moapi.v2.dd.js"],"names":["ejs","extendFucObj","options","os","dd","msg","message","device","notification","toast","icon","text","duration","delay","onSuccess","result","onFail","err","callback","title","btn","arguments","alert","buttonName","error","btnArray","btn1","btn2","push","confirm","buttonLabels","index","buttonIndex","res","showPreloader","showIcon","hidePreloader","items","actionSheet","cancelButton","otherButtons","content","biz","navigation","setTitle","setRight","show","control","backgroundColor","setMenu","data","nativeUI","which","type","contact","choose","startWithDepartmentId","multiple","users","userGuidList","corpId","max","currMaxChooseCount","cspace","saveFile","url","name","ding","post","alertType","alertDate","attachment","util","uploadImageFromCamera","compression","uploadImage","dealWithAttachFile","itemsArray","CommonTools","ios","toLowerCase","indexOf","splice","ddComponent","saveFileToDP","window","location","href","oldOpenPage","page","openPage","extendFuc","jsonObj","app","appendParams","console","log","document"],"mappings":"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","sourcesContent":["/**\n * 作者: guotq\n * 创建时间: 2016/12/06\n * 版本: [1.0, 2017/05/25 ]\n * 版权: 江苏国泰新点软件有限公司\n * 描述: ejs 2.1系列API在dd环境下的部分实现\n * 目前只实现了部分api\n * 请先引入ejsv2核心文件\n * 实现的模块有:\n * nativeUI模块\n * navigator部分功能\n * ddComponent 钉钉平台下独特的一些api\n */\n\n/**\n * 拓展ejs在钉钉下的api\n * 所有参数和ejs保持一致就行了\n */\nejs.extendFucObj('nativeUI', {\n\t'toast': function(options) {\n\t\tif(!ejs.os.dd) {\n\t\t\t// 只有dd中才能使用\n\t\t\treturn;\n\t\t}\n\t\tvar msg = '';\n\t\toptions = options || {};\n\t\tif(typeof options === 'string') {\n\t\t\tmsg = options;\n\t\t} else {\n\t\t\tmsg = options.message;\n\t\t}\n\t\tdd.device.notification.toast({\n\t\t\ticon: '', //icon样式，有success和error，默认为空 0.0.2\n\t\t\ttext: msg || '', //提示信息\n\t\t\tduration: 2, //显示持续时间，单位秒，默认按系统规范[android只有两种(<=2s >2s)]\n\t\t\tdelay: 0, //延迟显示，单位秒，默认0\n\t\t\tonSuccess: function(result) {\n\t\t\t\t/*{}*/\n\t\t\t},\n\t\t\tonFail: function(err) {}\n\t\t});\n\t},\n\t//callback目前只有钉钉中有用\n\t'alert': function(options, callback) {\n\t\tif(!ejs.os.dd) {\n\t\t\t// 只有dd中才能使用\n\t\t\treturn;\n\t\t}\n\t\tvar title = '',\n\t\t\tmsg = '',\n\t\t\tbtn = '';\n\t\toptions = options || {};\n\t\tif(typeof options === 'string') {\n\t\t\tmsg = options;\n\t\t\ttitle = arguments[1] || '';\n\t\t\tbtn = arguments[2] || '';\n\t\t\tcallback = arguments[3] || null;\n\t\t} else {\n\t\t\tmsg = options.message;\n\t\t\ttitle = options.title;\n\t\t\tbtn = options.btn;\n\t\t}\n\t\tmsg = msg || '';\n\t\ttitle = title || \"提示\";\n\t\tbtn = btn || '确定';\n\t\tdd.device.notification.alert({\n\t\t\tmessage: msg,\n\t\t\ttitle: title, //可传空\n\t\t\tbuttonName: btn,\n\t\t\tonSuccess: function() {\n\t\t\t\t//onSuccess将在点击button之后回调\n\t\t\t\t/*回调*/\n\t\t\t\tcallback && callback();\n\t\t\t},\n\t\t\tonFail: function(err) {\n\t\t\t\terror && error();\n\t\t\t}\n\t\t});\n\t},\n\t'confirm': function(options, callback) {\n\t\tif(!ejs.os.dd) {\n\t\t\t// 只有dd中才能使用\n\t\t\treturn;\n\t\t}\n\t\toptions = options || {};\n\n\t\tif(typeof options === 'string') {\n\t\t\toptions = {\n\t\t\t\t'message': options\n\t\t\t};\n\t\t\tif(typeof arguments[1] === 'string') {\n\t\t\t\toptions.title = arguments[1];\n\t\t\t\tif(typeof arguments[2] === 'object') {\n\t\t\t\t\tbtnArray = arguments[2];\n\t\t\t\t\tcallback = arguments[3];\n\t\t\t\t} else {\n\t\t\t\t\tcallback = arguments[2];\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t\tvar msg = options.message || '';\n\t\tvar title = options.title || \"提示\";\n\t\tvar btnArray = [];\n\t\tvar btn1 = options.btn1 || '取消';\n\t\tvar btn2 = options.btn2 || (options.btn2 !== null ? '确定' : '');\n\t\tbtn1 && btnArray.push(btn1);\n\t\tbtn2 && btnArray.push(btn2);\n\n\t\tdd.device.notification.confirm({\n\t\t\tmessage: msg,\n\t\t\ttitle: title,\n\t\t\tbuttonLabels: btnArray,\n\t\t\tonSuccess: function(result) {\n\t\t\t\t//onSuccess将在点击button之后回调\n\t\t\t\t/*\n\t\t\t\t{\n\t\t\t\t    buttonIndex: 0 //被点击按钮的索引值，Number类型，从0开始\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t\tvar index = -1 * (result.buttonIndex + 1);\n\t\t\t\tvar res = {\n\t\t\t\t\t'code': 1,\n\t\t\t\t\t'msg': '',\n\t\t\t\t\t'result': {\n\t\t\t\t\t\t\"which\": index\n\t\t\t\t\t},\n\t\t\t\t\t'detail': result\n\t\t\t\t};\n\t\t\t\tcallback && callback(res.result, res.msg, res);\n\t\t\t},\n\t\t\tonFail: function(err) {}\n\t\t});\n\n\t},\n\t//ejs下暂时没有title与options属性这个属性\n\t//padlock  点击自动关闭--目前只有这个兼容h5版本\n\t'showWaiting': function(title, options) {\n\t\tif(!ejs.os.dd) {\n\t\t\t// 只有dd中才能使用\n\t\t\treturn;\n\t\t}\n\t\ttitle = title || '';\n\t\toptions = options || {};\n\t\tdd.device.notification.showPreloader({\n\t\t\ttext: title || \"等待中...\", //loading显示的字符，空表示不显示文字\n\t\t\tshowIcon: true, //是否显示icon，默认true\n\t\t\tonSuccess: function() {\n\t\t\t\t/*{}*/\n\n\t\t\t},\n\t\t\tonFail: function(err) {\n\n\t\t\t}\n\t\t});\n\t},\n\t'closeWaiting': function() {\n\t\tif(!ejs.os.dd) {\n\t\t\t// 只有dd中才能使用\n\t\t\treturn;\n\t\t}\n\t\tdd.device.notification.hidePreloader({\n\t\t\tonSuccess: function(result) {\n\t\t\t\t/*{}*/\n\t\t\t},\n\t\t\tonFail: function(err) {}\n\t\t});\n\n\t},\n\t'actionSheet': function(options, callback) {\n\t\tif(!ejs.os.dd) {\n\t\t\t// 只有dd中才能使用\n\t\t\treturn;\n\t\t}\n\t\toptions = options || {};\n\t\toptions.items = options.items || [];\n\t\tvar title = options.title || ''\n\t\tdd.device.notification.actionSheet({\n\t\t\ttitle: title, //标题\n\t\t\tcancelButton: '取消', //取消按钮文本\n\t\t\totherButtons: options.items,\n\t\t\tonSuccess: function(result) {\n\t\t\t\t//onSuccess将在点击button之后回调\n\t\t\t\t/*{\n\t\t\t\t    buttonIndex: 0 //被点击按钮的索引值，Number，从0开始, 取消按钮为-1\n\t\t\t\t}*/\n\t\t\t\tvar index = result.buttonIndex;\n\t\t\t\tvar content = options.items[index];\n\t\t\t\tvar res = {\n\t\t\t\t\t'code': 1,\n\t\t\t\t\t'msg': '',\n\t\t\t\t\t'result': {\n\t\t\t\t\t\t\"which\": index,\n\t\t\t\t\t\t\"content\": content\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tcallback && callback(res.result, res.msg, res);\n\t\t\t},\n\t\t\tonFail: function(err) {\n\t\t\t\terror && error();\n\t\t\t}\n\t\t});\n\n\t},\n});\n\n/**\n * 拓展  navigator 模块\n */\nejs.extendFucObj('navigator', {\n\t'setTitle': function(title) {\n\t\tif(!ejs.os.dd) {\n\t\t\t// 只有dd中才能使用\n\t\t\treturn;\n\t\t}\n\t\ttitle = title || '';\n\t\tdd.biz.navigation.setTitle({\n\t\t\ttitle: title, //控制标题文本，空字符串表示显示默认文本\n\t\t\tonSuccess: function(result) {\n\n\t\t\t},\n\t\t\tonFail: function(err) {}\n\t\t});\n\t},\n\t'setRightTextBtn': function(title, callback) {\n\t\tif(!ejs.os.dd) {\n\t\t\t// 只有dd中才能使用\n\t\t\treturn;\n\t\t}\n\t\ttitle = title || '';\n\t\tdd.biz.navigation.setRight({\n\t\t\tshow: title ? true : false, //控制按钮显示， true 显示， false 隐藏， 默认true\n\t\t\tcontrol: callback ? true : false, //是否控制点击事件，true 控制，false 不控制， 默认false\n\t\t\ttext: title || '', //控制显示文本，空字符串表示显示默认文本\n\t\t\tonSuccess: function(result) {\n\t\t\t\t//如果control为true，则onSuccess将在发生按钮点击事件被回调\n\t\t\t\t/*\n\t\t\t\t{}\n\t\t\t\t*/\n\t\t\t\tcallback && callback(result);\n\t\t\t},\n\t\t\tonFail: function(err) {\n\t\t\t\t//设置按钮失败，可以提示\n\t\t\t}\n\t\t});\n\t},\n\t// ejs中是用popwindow来实现\n\t'setRightMenu': function(backgroundColor, items, callback) {\n\t\tif(!ejs.os.dd) {\n\t\t\t// 只有dd中才能使用\n\t\t\treturn;\n\t\t}\n\t\tdd.biz.navigation.setMenu({\n\t\t\tbackgroundColor: backgroundColor,\n\t\t\titems: items,\n\t\t\tonSuccess: function(data) {\n\t\t\t\tcallback && callback(data);\n\t\t\t},\n\t\t\tonFail: function(err) {}\n\t\t});\n\t}\n});\n\n/**\n * 拓展dd特有的api\n * 这种API只适合与钉钉平台 \n */\nejs.extendFucObj('ddComponent', {\n\t/**\n\t * @description 选择通讯录,将一些逻辑都封装起来,简化使用\n\t * @param {JSON} options 选项\n\t * @param {Function} callback 回调函数\n\t */\n\t'chooseContactPerson': function(options, callback) {\n\t\tif(!ejs.os.dd) {\n\t\t\t// 只有dd中才能使用\n\t\t\treturn;\n\t\t}\n\t\tejs.nativeUI.actionSheet({\n\t\t\t'title': '打开类别',\n\t\t\t'items': ['整个公司选择', '本部门选择']\n\t\t}, function(result) {\n\t\t\tvar index = result.which;\n\t\t\tif(index === -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//默认为整个公司选择\n\t\t\tvar type = 0;\n\t\t\tif(index === 1) {\n\t\t\t\t//部门选择\n\t\t\t\ttype = -1;\n\t\t\t}\n\t\t\tdd.biz.contact.choose({\n\t\t\t\t//默认要整个公司进行选择\n\t\t\t\tstartWithDepartmentId: type, //-1表示打开的通讯录从自己所在部门开始展示, 0表示从企业最上层开始，(其他数字表示从该部门开始:暂时不支持)\n\t\t\t\tmultiple: true, //是否多选： true多选 false单选； 默认true\n\t\t\t\tusers: options.userGuidList, //默认选中的用户列表，userid；成功回调中应包含该信息\n\t\t\t\tcorpId: options.corpId, //企业id\n\t\t\t\tmax: options.currMaxChooseCount, //人数限制，当multiple为true才生效，可选范围1-1500\n\t\t\t\tonSuccess: function(data) {\n\t\t\t\t\t//onSuccess将在选人结束，点击确定按钮的时候被回调\n\t\t\t\t\t/* data结构\n\t\t\t\t\t  [{\n\t\t\t\t\t    \"name\": \"张三\", //姓名\n\t\t\t\t\t    \"avatar\": \"http://g.alicdn.com/avatar/zhangsan.png\" //头像图片url，可能为空\n\t\t\t\t\t    \"emplId\": '0573', //userid\n\t\t\t\t\t   },\n\t\t\t\t\t   ...\n\t\t\t\t\t  ]\n\t\t\t\t\t*/\n\t\t\t\t\tcallback && callback(data);\n\n\t\t\t\t},\n\t\t\t\tonFail: function(err) {}\n\t\t\t});\n\t\t});\n\t},\n\t/**\n\t * @description 将文件转存到钉盘\n\t * @param {JSON} options 选项\n\t * @param {Function} callback 回调函数\n\t */\n\t'saveFileToDP': function(options, callback) {\n\t\tif(!ejs.os.dd) {\n\t\t\t// 只有dd中才能使用\n\t\t\treturn;\n\t\t}\n\t\toptions = options || {};\n\t\tdd.biz.cspace.saveFile({\n\t\t\tcorpId: options.corpId,\n\t\t\turl: options.url,\n\t\t\tname: options.name || '匿名文件',\n\t\t\tonSuccess: function(data) {\n\t\t\t\t/* data结构\n\t\t\t\t{\"data\":\n\t\t\t\t   [\n\t\t\t\t   {\n\t\t\t\t   \"corpId\": \"\", //公司id\n\t\t\t\t   \"spaceId\": \"\" //空间id\n\t\t\t\t   \"fileId\": \"\", //文件id\n\t\t\t\t   \"fileName\": \"\", //文件名\n\t\t\t\t   \"fileSize\": 111111, //文件大小\n\t\t\t\t   \"fileType\": \"\", //文件类型\n\t\t\t\t   }\n\t\t\t\t   ]\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t\tejs.nativeUI.toast('转到钉盘成功');\n\t\t\t\tcallback && callback(data);\n\t\t\t},\n\t\t\tonFail: function(err) {\n\t\t\t\tejs.nativeUI.toast('转到钉盘失败...');\n\t\t\t}\n\t\t});\n\t},\n\t/**\n\t * @description 钉住,发钉,不是钉盘\n\t * @param {JSON} options\n\t * @param {Function} callback\n\t */\n\t'postDing': function(options, callback) {\n\t\tif(!ejs.os.dd) {\n\t\t\t// 只有dd中才能使用\n\t\t\treturn;\n\t\t}\n\t\toptions = options || {};\n\t\tdd.biz.ding.post({\n\t\t\t//用户列表，默认为用户自己\n\t\t\tusers: options.users,\n\t\t\tcorpId: options.corpId, //企业id\n\t\t\ttype: options.type, //钉类型 1：image  2：link\n\t\t\talertType: options.alertType || 2,\n\t\t\talertDate: options.alertDate,\n\t\t\tattachment: options.attachment,\n\t\t\ttext: options.text, //消息\n\t\t\tonSuccess: function() {\n\t\t\t\tcallback && callback();\n\t\t\t},\n\t\t\tonFail: function() {}\n\t\t});\n\t},\n\t/**\n\t * @description 上传拍照图片，可以得到照片\n\t * @param {JSON} options\n\t * @param {Function} callback\n\t */\n\t'uploadImageFromCamera': function(options, callback) {\n\t\tif(!ejs.os.dd) {\n\t\t\t// 只有dd中才能使用\n\t\t\treturn;\n\t\t}\n\t\toptions = options || {};\n\t\tdd.biz.util.uploadImageFromCamera({\n\t\t\tcompression: options.compression, //(是否压缩，默认为true)\n\t\t\tonSuccess: function(result) {\n\t\t\t\tcallback && callback(result);\n\t\t\t\t//onSuccess将在图片上传成功之后调用\n\t\t\t\t/*\n\t\t\t\t[\n\t\t\t\t  'http://gtms03.alicdn.com/tps/i3/TB1VF6uGFXXXXalaXXXmh5R_VXX-237-236.png'\n\t\t\t\t]\n\t\t\t\t*/\n\t\t\t},\n\t\t\tonFail: function() {}\n\t\t});\n\t},\n\t/**\n\t * @description 上传相册，可以得到照片\n\t * @param {JSON} options\n\t * @param {Function} callback\n\t */\n\t'uploadImage': function(options, callback) {\n\t\tif(!ejs.os.dd) {\n\t\t\t// 只有dd中才能使用\n\t\t\treturn;\n\t\t}\n\t\toptions = options || {};\n\t\tdd.biz.util.uploadImage({\n\t\t\tmultiple: options.multiple, //是否多选，默认false\n\t\t\tmax: options.max, //最多可选个数\n\t\t\tonSuccess: function(result) {\n\t\t\t\tcallback && callback(result);\n\t\t\t\t//onSuccess将在图片上传成功之后调用\n\t\t\t\t/*\n\t\t\t\t[\n\t\t\t\t  'http://gtms03.alicdn.com/tps/i3/TB1VF6uGFXXXXalaXXXmh5R_VXX-237-236.png'\n\t\t\t\t]\n\t\t\t\t*/\n\t\t\t},\n\t\t\tonFail: function() {}\n\t\t});\n\t},\n\t/**\n\t * @description 处理附件，是决定用钉盘还是下载\n\t * @param {JSON} options 参数\n\t */\n\tdealWithAttachFile: function(options) {\n\t\tif(!ejs.os.dd) {\n\t\t\t// 只有dd中才能使用\n\t\t\treturn;\n\t\t}\n\t\toptions = options || {};\n\t\tvar url = options.url || '';\n\t\tvar name = options.name || '';\n\t\tvar corpId = options.corpId || '';\n\t\tvar itemsArray = ['转到钉盘', '直接下载'];\n\t\tif(CommonTools.os.ios) {\n\t\t\t//iOS下只支持rar,zip的下载\n\t\t\tif(url.toLowerCase().indexOf('.zip') === -1 &&\n\t\t\t\turl.toLowerCase().indexOf('.rar') === -1) {\n\t\t\t\titemsArray.splice(1, 1);\n\t\t\t}\n\t\t}\n\t\tejs.nativeUI.actionSheet({\n\t\t\t'title': '选择',\n\t\t\t'items': itemsArray\n\t\t}, function(result) {\n\t\t\tvar index = result.which;\n\t\t\tif(index === 0) {\n\t\t\t\t//url = 'http://218.4.136.114:7009/EpointMobilePlatform6/test.xlsx';\n\t\t\t\tejs.ddComponent.saveFileToDP({\n\t\t\t\t\tcorpId: corpId,\n\t\t\t\t\turl: url,\n\t\t\t\t\tname: name\n\t\t\t\t});\n\t\t\t} else if(index === 1) {\n\t\t\t\twindow.location.href = url;\n\t\t\t}\n\t\t});\n\t},\n});\n\n/**\n * 单独覆盖一些已有的esj api 和拓展模式有区别\n * 比如openPage需要重新改写逻辑\n * 目前只支持单个覆盖\n * 目前不会自动暴露出去，只会覆盖已有\n */\n(function() {\n\tvar oldOpenPage = ejs.page.openPage;\n\t// 覆盖openPage,默认关闭钉钉中的分享\n\tejs.extendFuc('page', 'openPage', function(url, title, jsonObj, options, callback, error) {\n\t\tjsonObj = jsonObj || {};\n\t\toptions = options || {};\n\t\turl = ejs.app.appendParams(url, jsonObj);\n\t\tif(ejs.os.dd) {\n\t\t\tif(url.indexOf('?') === -1) {\n\t\t\t\turl += '?';\n\t\t\t} else {\n\t\t\t\turl += '&';\n\t\t\t}\n\t\t\turl += 'dd_share=false';\n\t\t\tconsole.log(\"url:\" + url);\n\t\t\tdocument.location.href = url;\n\t\t} else {\n\t\t\toldOpenPage(url, title, jsonObj, options, callback, error);\n\t\t}\n\t}, true);\n})();"]}]}