{"remainingRequest":"/Users/gujiahao/Documents/work/github/artweb/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gujiahao/Documents/work/github/artweb/src/showcase/pulltorefresh.vue?vue&type=style&index=0&id=348b5312&scoped=true&lang=css&","dependencies":[{"path":"/Users/gujiahao/Documents/work/github/artweb/src/showcase/pulltorefresh.vue","mtime":1588230106632},{"path":"/Users/gujiahao/Documents/work/github/artweb/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/gujiahao/Documents/work/github/artweb/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/gujiahao/Documents/work/github/artweb/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/gujiahao/Documents/work/github/artweb/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/gujiahao/Documents/work/github/artweb/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.srh-btn {\n  height: 34px;\n  font-size: 14px;\n}\n\n.search-area {\n  border-bottom: 1px solid #ebedf0;\n}\n\n.van-content {\n  top: 55px;\n}\n",{"version":3,"sources":["pulltorefresh.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8HA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"pulltorefresh.vue","sourceRoot":"src/showcase","sourcesContent":["<template>\n  <div class=\"container\">\n    <van-search\n      v-model=\"searchValue\"\n      class=\"search-area\"\n      placeholder=\"请输入搜索关键词\"\n      :show-action=\"true\"\n      background=\"#fff\"\n      @search=\"onSearch\"\n    >\n      <div slot=\"action\">\n        <van-button type=\"info\" size=\"small\" class=\"srh-btn\" @click=\"onSearch\">搜索</van-button>\n      </div>\n    </van-search>\n\n    <div class=\"van-content\">\n      <van-pull-refresh v-model=\"pullLoading\" @refresh=\"onRefresh\">\n        <van-list v-model=\"upLoading\" :finished=\"finished\" @load=\"onLoad\" finished-text=\"没有更多数据了\">\n          <van-cell-group>\n            <van-cell v-for=\"(item, index) in listdata\" :key=\"index\" :title=\"item.title\"></van-cell>\n          </van-cell-group>\n        </van-list>\n      </van-pull-refresh>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Util from '@utils';\nimport vanSearch from '@components/search';\nimport vanButton from '@components/button';\nimport { PullRefresh, List } from 'vant';\nimport vanCell from '@components/cell';\nimport vanCellGroup from '@components/cellgroup';\n\nexport default {\n  name: 'list',\n  components: {\n    vanSearch,\n    vanButton,\n    [PullRefresh.name]: PullRefresh,\n    [List.name]: List,\n    vanCell,\n    vanCellGroup\n  },\n  data() {\n    return {\n      searchValue: '',\n      pullLoading: false,\n      upLoading: false,\n      finished: false,\n      pageSize: 10,\n      pageIndex: 0,\n      listdata: []\n    };\n  },\n  methods: {\n    /**\n     * 下拉刷新回调\n     */\n    onRefresh() {\n      this.pageIndex = 0;\n      this.finished = false;\n      this.upLoading = true;\n\n      setTimeout(() => {\n        this.getList();\n      }, 500);\n    },\n    /**\n     * 获取列表\n     */\n    getList() {\n      Util.ajax({\n        url: 'https://www.easy-mock.com/mock/5d24037eb491124e37cee77d/mobileframemock/getlist',\n        data: JSON.stringify({\n          token: 'RXBvaW50X1dlYlNlcml2Y2VfKiojIzA2MDE=',\n          params: {\n            pageindex: this.pageIndex,\n            pagesize: this.pageSize,\n            keyword: this.searchValue\n          }\n        }),\n        success: ({ custom }) => {\n          const infolist = custom.infolist || [];\n          const len = infolist.length;\n\n          if (this.pageIndex === 0) {\n            this.listdata = infolist;\n          } else if (len > 1) {\n            infolist.forEach(e => {\n              this.listdata.push(e);\n            });\n          }\n\n          // 加载状态结束\n          this.upLoading = false;\n          this.pullLoading = false;\n          this.pageIndex++;\n\n          if (len === 0) {\n            this.finished = true;\n          }\n        }\n      });\n    },\n    /**\n     * 上拉刷新回调\n     */\n    onLoad() {\n      setTimeout(() => {\n        this.getList();\n      }, 500);\n    },\n    /**\n     * 搜索\n     */\n    onSearch() {\n      this.pullLoading = true;\n      this.onRefresh();\n    }\n  }\n};\n</script>\n\n<style scoped>\n.srh-btn {\n  height: 34px;\n  font-size: 14px;\n}\n\n.search-area {\n  border-bottom: 1px solid #ebedf0;\n}\n\n.van-content {\n  top: 55px;\n}\n</style>\n"]}]}